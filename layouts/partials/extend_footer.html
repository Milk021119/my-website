<canvas id="snow-canvas" style="position:fixed;top:0;left:0;z-index:-1;width:100%;height:100%;pointer-events:none;"></canvas>

<script>
(function() {
    const canvas = document.getElementById('snow-canvas');
    const ctx = canvas.getContext('2d');
    let width, height, flakes;

    function init() {
        width = window.innerWidth;
        height = window.innerHeight;
        canvas.width = width;
        canvas.height = height;
        flakes = [];
        // 雪花数量
        for (let i = 0; i < 150; i++) {
            flakes.push(new Snowflake());
        }
    }

    function Snowflake() {
        // 【关键】初始化时随机分布在整个屏幕的 x 和 y 坐标
        this.x = Math.random() * width;
        this.y = Math.random() * height;
        this.radius = Math.random() * 3 + 1;
        
        // 【关键】随机方向的初速度（不仅仅是向下）
        this.vx = (Math.random() - 0.5) * 0.5; // 水平随机移动
        this.vy = Math.random() * 0.6 + 0.2;   // 垂直主速度
        
        this.opacity = Math.random() * 0.6 + 0.2;
        this.fuzziness = Math.random() * 3;    // 虚化程度
    }

    Snowflake.prototype.draw = function() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
        
        // 【核心修改】给雪花加一个微弱的深色外边框/投影，让它在浅色背景里更立体
        ctx.shadowBlur = this.fuzziness + 2; 
        ctx.shadowColor = "rgba(100, 100, 150, 0.3)"; // 淡淡的灰蓝色投影
        
        ctx.fillStyle = `rgba(255, 255, 255, ${this.opacity})`;
        ctx.fill();
        ctx.shadowBlur = 0;
    }

    Snowflake.prototype.update = function() {
        // 加入一点点随机抖动（布朗运动）
        this.x += this.vx + (Math.random() - 0.5) * 0.2;
        this.y += this.vy;

        // 【循环滚动】如果出了屏幕，从另一侧回来
        if (this.y > height) {
            this.y = -10;
            this.x = Math.random() * width;
        }
        if (this.x > width) this.x = 0;
        if (this.x < 0) this.x = width;
    }

    function animate() {
        ctx.clearRect(0, 0, width, height);
        flakes.forEach(f => {
            f.update();
            f.draw();
        });
        requestAnimationFrame(animate);
    }

    window.addEventListener('resize', init);
    init();
    animate();

    /* 保持鼠标特效 - 颜色改为浅紫色呼应 */
    const dot = document.getElementById('cursor-dot');
    const ring = document.getElementById('cursor-ring');
    document.addEventListener('mousemove', (e) => {
        const x = e.clientX, y = e.clientY;
        requestAnimationFrame(() => {
            dot.style.transform = `translate(${x - 4}px, ${y - 4}px)`;
            ring.style.transform = `translate(${x - 15}px, ${y - 15}px)`;
            dot.style.opacity = "1"; ring.style.opacity = "1";
        });
    });
})();
</script>

<style>
    #cursor-dot, #cursor-ring {
        position: fixed; top: 0; left: 0; pointer-events: none;
        border-radius: 50%; z-index: 9999; opacity: 0;
    }
    #cursor-dot { width: 8px; height: 8px; background: #9b59b6; }
    #cursor-ring { width: 30px; height: 30px; border: 2px solid #9b59b6; transition: transform 0.2s ease-out; }
</style>
<div id="live-clock"></div>

<style>
    #live-clock {
        position: fixed;
        bottom: 20px;
        left: 20px;
        font-family: 'Courier New', Courier, monospace;
        font-size: 14px;
        color: rgba(61, 61, 92, 0.6); /* 对应你之前的深灰蓝 */
        background: rgba(255, 255, 255, 0.3);
        padding: 5px 12px;
        border-radius: 20px;
        backdrop-filter: blur(5px);
        z-index: 1000;
        pointer-events: none;
        border: 1px solid rgba(255, 255, 255, 0.2);
    }
</style>

<script>
    function updateClock() {
        const now = new Date();
        const timeStr = now.getHours().toString().padStart(2, '0') + ":" + 
                        now.getMinutes().toString().padStart(2, '0') + ":" + 
                        now.getSeconds().toString().padStart(2, '0');
        const dateStr = (now.getMonth() + 1) + "月" + now.getDate() + "日 ";
        document.getElementById('live-clock').innerText = dateStr + timeStr;
    }
    setInterval(updateClock, 1000);
    updateClock();
</script>